<div class="upload-container" (dragover)="onDragOver($event)" (drop)="onDrop($event)">
  <h2>
    Upload Files
    <span class="material-icons">upload</span>
  </h2>

  <!-- File input for manual selection -->
  <input type="file" (change)="onFilesSelected($event)" multiple name="files" #fileInput />
  <p>Or drag and drop your files here</p>

  <!-- Selected files list -->
  <div *ngIf="uploadedFiles && uploadedFiles.length > 0">
    <h3>Selected Files</h3>
    <ul>
      <li *ngFor="let file of uploadedFiles; let i = index" class="file-item">
        <!-- File preview -->
        <div *ngIf="filePreviews[i]?.preview" class="file-preview">
          <img
            *ngIf="file.type.startsWith('image/')"
            [src]="filePreviews[i].preview"
            [alt]="'Preview of ' + file.name"
          />
          <img
            *ngIf="file.type === 'application/pdf'"
            src="assets/pdf-icon.png"
            [alt]="'PDF icon for ' + file.name"
          />
        </div>
        <span>{{ file.name }}</span>

        <!-- Progress bar for each file, only show for the currently uploading file -->
        <div *ngIf="fileProgress[file.name] !== undefined && currentUploadingIndex === i" class="file-progress-container">
          <p>{{ fileProgress[file.name] < 100 ? 'Uploading...' : 'Upload Complete' }}</p>
          <div class="progress">
            <div class="progress-bar" role="progressbar" [style.width.%]="fileProgress[file.name]">
              {{ fileProgress[file.name] }}%
            </div>
          </div>
        </div>
      </li>
    </ul>
  </div>

  <!-- Upload button, shown only after file selection -->
  <div *ngIf="uploadedFiles && uploadedFiles.length > 0">
    <button (click)="uploadFiles()" [disabled]="uploading">Upload</button>
  </div>

  <!-- Display uploaded file names after success -->
  <div *ngIf="uploadedFileNames.length > 0">
    <p>Upload Complete: </p>
    <ul>
      <li *ngFor="let name of uploadedFileNames" style="color: white;">{{ name }}</li>
    </ul>
  </div>
</div>
